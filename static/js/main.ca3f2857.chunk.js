(this["webpackJsonpcolor-magic"]=this["webpackJsonpcolor-magic"]||[]).push([[0],{49:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var r=t(7),i=t(6),a=t.n(i),o=t(20),s=t.n(o),c=t(1),u=t(2),d=t(3),l=t(21),f=t(4),m=t(22),p=t(11),h=t(0),b=t(23),O=t(28),v=t(24),g=t(29),j=t(25),w=function e(n){Object(c.a)(this,e),this.init=function(){},this.animate=function(e){},this.dispose=function(){},this.props=n},I={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,n){return Math.pow(e,n)},easeOut:function(e,n){return 1-I.easeIn(1-e,n)},easeInOut:function(e,n){return e<.5?I.easeIn(2*e,n)/2:1-I.easeIn(2*(1-e),n)/2},easeIn2:function(e){return I.easeIn(e,1.5)},easeOut2:function(e){return I.easeOut(e,1.5)},easeInOut2:function(e){return I.easeInOut(e,1.5)}},F=I,x=5e3,C=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).init=function(e){var n=e.clientWidth,t=e.clientHeight,i=n>1200;r.scene.renderer=new h.WebGLRenderer({antialias:!i,alpha:!0}),r.scene.renderer.setClearColor(0,0),r.scene.renderer.setSize(n,t),r.scene.renderer.setPixelRatio(window.devicePixelRatio),r.scene.renderer.shadowMap.enabled=!0,r.scene.renderer.shadowMap.type=h.PCFSoftShadowMap,e.appendChild(r.scene.renderer.domElement),r.scene.camera=new h.PerspectiveCamera(75,n/t,.1,1e3),r.scene.controls=new b.a(r.scene.camera,r.scene.renderer.domElement),r.scene.controls.enabled=!1,r.scene.camera.position.z=-25,r.scene.controls.update(),r.scene.interaction=new j.a(r.scene.renderer,r.scene.scene,r.scene.camera),r.scene.composer=new O.a(r.scene.renderer),r.scene.renderPass=new v.a(r.scene.scene,r.scene.camera),r.scene.glitchPass=new g.a,r.scene.composer.addPass(r.scene.renderPass),r.scene.composer.addPass(r.scene.glitchPass),r.initUnits(),r.frameId||(r.frameId=requestAnimationFrame(r.animate))},r.dispose=function(){r.disposeUnits(),cancelAnimationFrame(r.frameId)},r.resize=function(e,n){r.scene.renderer&&r.scene.camera&&(r.scene.camera.aspect=e/n,r.scene.camera.updateProjectionMatrix(),r.scene.renderer.setSize(e,n),r.scene.renderer.setPixelRatio(window.devicePixelRatio))},r.animate=function(){r.scene.frameNumber=(r.scene.frameNumber+1)%x;var e=r.scene.renderer.domElement.getBoundingClientRect(),n=e.left,t=e.right,i=e.top,a=(e.bottom<0||i>r.scene.renderer.domElement.clientHeight||t<0||r.scene.renderer.domElement.clientWidth,r.scene),o=a.composer,s=a.controls,c=a.units;a.clock,a.renderer;Object.keys(c).forEach((function(e){return c[e].animate(Object(p.a)(Object(p.a)({THREE:h},r.scene),{},{input:r.scene.units.Controls,maxFrameNumber:x,react:r.props.react,onLoad:r.props.onLoad}))})),s.update(),o.render(),r.frameId=window.requestAnimationFrame(r.animate)},r.initUnits=function(){var e=Object(p.a)(Object(p.a)({THREE:h},r.scene),{},{input:r.scene.units.Controls,maxFrameNumber:x,react:r.props.react,onLoad:r.props.onLoad});Object.keys(r.props.units).forEach((function(n){var t=r.props.units[n];!t.disabled^r.scene.unitsToggled&&(r.scene.units[n]=new t.unit(Object(p.a)(Object(p.a)({},e),t.args)),r.scene.units[n].init&&r.scene.units[n].init())}))},r.disposeUnits=function(){var e=r.scene,n=e.scene,t=e.units;for(Object.keys(t).forEach((function(e){return t[e].dispose()}));n.children.length>0;)n.remove(n.children[0])},r.toggleUnits=function(){r.disposeUnits(),r.scene.unitsToggled=!r.scene.unitsToggled,r.initUnits()},r.scene={renderer:void 0,camera:void 0,scene:new h.Scene,composer:void 0,controls:void 0,interaction:void 0,clock:new h.Clock,frameNumber:0,units:{},unitsToggled:!1,react:e.react},r}return t}(function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).animateTransitions=function(){var e=[];r.transitions.forEach((function(n){if(n.currentFrame>=n.numberOfFrames)e.push(n);else{var t=n.currentFrame/n.numberOfFrames,r=F[n.timingFuntion]||function(e){return e};n.variable.copy(n.initialValue.clone().lerp(n.value,r(t))),n.currentFrame++}})),e.forEach((function(e){e.onComplete&&e.onComplete(),r.unregisterTransition(e.id)}))},r.registerTransition=function(e){return r.transitions.push({id:r.currentId=(r.currentId+1)%Number.MAX_SAFE_INTEGER,variable:e.variable,value:e.value.clone(),initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}}),r.currentId},r.unregisterTransition=function(e){var n=r.transitions.map((function(e){return e.id})).indexOf(e);-1!==n&&r.transitions.splice(n,1)},r.unregisterAllTransitions=function(){return r.transitions.length=0},r.noActiveTransitions=function(){return 0===r.transitions.length},r.transitions=[],r.currentId=0,r}return t}(w)),E=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var i;return Object(c.a)(this,t),(i=n.call(this,e)).componentWillUnmount=function(){i.scene.dispose()},i.render=function(){return Object(r.jsx)("div",{className:"Viewer",ref:i.viewerRef})},i.state={},i.viewerRef=new a.a.createRef,i.scene=new C({react:{openDoor:function(e){return console.log("data")}},units:e.units,onLoad:e.onLoad}),i}return Object(f.a)(t,[{key:"componentDidMount",value:function(){this.resizeObs=new m.a(this.resize.bind(this)).observe(this.viewerRef.current),this.scene.init(this.viewerRef.current)}},{key:"resize",value:function(){var e=this.viewerRef.current;e&&this.scene.resize(e.clientWidth,e.clientHeight)}}]),t}(a.a.Component),L=t(10),T=t(26),y=t.n(T),A=t(12),M=t.n(A),Q=t(13),R=t(27),z=function(){var e=Object(Q.a)(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){return(new R.a).load(n,(function(n){return e(n)}),(function(e){return console.log(e.loaded/e.total*100+"% loaded")}),(function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).loadModel=function(){var e=Object(Q.a)(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n.props.file);case 2:n.gtlf=e.sent,n.scene=n.gtlf.scene,n.props.scene.add(n.scene),n.onLoad&&n.onLoad();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.animate=function(e){},r.dispose=function(e){},r}return t}(w),S={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeIn:function(e,n){return Math.pow(e,n)},easeOut:function(e,n){return 1-S.easeIn(1-e,n)},easeInOut:function(e,n){return e<.5?S.easeIn(2*e,n)/2:1-S.easeIn(2*(1-e),n)/2},easeIn2:function(e){return S.easeIn(e,1.5)},easeOut2:function(e){return S.easeOut(e,1.5)},easeInOut2:function(e){return S.easeInOut(e,1.5)}},N=S,k=(Math.PI,function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=n.call(this,e)).onLoad=function(){r.scene.scale.multiplyScalar(12.5),r.scene.position.add(new h.Vector3(0,-35,20)),r.scene.rotation.x+=Math.PI/7,r.props.onLoad()},r.animate=function(e){r.animateTransitions();var n=e.frameNumber/e.maxFrameNumber*7;r.scene&&(r.scene.rotation.y=1.2*n*Math.PI)},r.dispose=function(e){},r.loadModel(Object(L.a)(r)),r}return t}(y()(P,(function e(n){var t=this;Object(c.a)(this,e),this.animateTransitions=function(){var e=[];t.transitions.forEach((function(n){if(n.currentFrame>=n.numberOfFrames)e.push(n);else{var t=n.currentFrame/n.numberOfFrames,r=N[n.timingFuntion]||function(e){return e};n.variable.slerp?n.variable.copy(n.initialValue.clone().slerp(n.value,r(t))):n.variable.copy(n.initialValue.clone().lerp(n.value,r(t))),n.currentFrame++}})),e.forEach((function(e){e.onComplete&&e.onComplete(),t.unregisterTransition(e.id)}))},this.registerTransition=function(e){return t.transitions.push({id:t.currentId=(t.currentId+1)%Number.MAX_SAFE_INTEGER,variable:e.variable,value:e.value.clone(),initialValue:e.variable.clone(),numberOfFrames:e.numberOfFrames||10,currentFrame:0,timingFuntion:e.timingFuntion||"none",onComplete:e.onComplete||function(){}}),t.currentId},this.unregisterTransition=function(e){var n=t.transitions.map((function(e){return e.id})).indexOf(e);-1!==n&&t.transitions.splice(n,1)},this.unregisterAllTransitions=function(){return t.transitions.length=0},this.noActiveTransitions=function(){return 0===t.transitions.length},this.transitions=[],this.currentId=0})))),U=[{color:255,x:23,z:13.8},{color:65280,x:11,z:25},{color:11141205,x:-11,z:25},{color:11184640,x:-23,z:13.8}],W=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var r;Object(c.a)(this,t),(r=n.call(this,e)).animate=function(e){},r.dispose=function(){};var i=e.scene,a=e.THREE;return r.light0=new a.HemisphereLight(16777215,4473924,1.35),r.light0.position.set(0,3,0),i.add(r.light0),r.lights=[],U.forEach((function(e,n){r.lights.push(new a.SpotLight(e.color,16777215,35));var t=r.lights[n];t.position.set(e.x,-12.5,e.z),t.decay=12,i.add(t),t.shadow.mapSize.width=512,t.shadow.mapSize.height=512,t.shadow.camera.near=.5,t.shadow.camera.far=500})),r}return t}(w),H=t.p+"static/media/combined.86292e85.glb",V=t.p+"static/media/Sentionauts.87369474.mp3",_=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={started:!1,audioLoaded:!1,modelLoaded:!1},e.componentDidMount=function(){return e.initializeAudio()},e.componentWillUnmount=function(){return e.audio.pause()},e.initializeAudio=function(){e.audio=new Audio,e.audio.addEventListener("canplay",(function(){return e.setState({audioLoaded:!0})})),e.audio.addEventListener("ended",(function(){e.audio.pause(),e.audio.currentTime=0,e.play()})),e.audio.preload="auto",e.audio.src=V,e.audio.load()},e.start=function(){e.audio.play(),e.setState({started:!0})},e.render=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(E,{id:"sceneClosed",onLoad:function(){return e.setState({modelLoaded:!0})},units:{head:{unit:k,args:{file:H},disabled:!1},lights:{unit:W,disabled:!1}}}),!e.state.started&&Object(r.jsx)("div",{className:"start-screen",children:Object(r.jsx)("button",{className:"start-screen__button",disabled:!e.state.audioLoaded||!e.state.modelLoaded,onClick:function(){return e.start()},children:e.state.audioLoaded&&e.state.modelLoaded?"START":"LOADING"})})]})},e}return t}(a.a.Component),D=(t(49),function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={},e.render=function(){return Object(r.jsx)(l.a,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(_,{})})})},e}return t}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.ca3f2857.chunk.js.map